<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="suzu.css" rel="stylesheet" type="text/css" media="all">
        <title>Suzu Puyotori's Big Debut!</title>
        <!-- <link rel="icon" href="https://thebelovedmoon.github.io/thebelovedmoon/oobe-screen/favi-sumiyoi.png" type="image/x-icon"> -->
        <meta name="og:type" content="website">
        <meta
        name="og:title" content="Suzu Puyotori's Big Debut!">
        <!-- <meta name="og:image" content="https://thebelovedmoon.github.io/thebelovedmoon/suzupuyotori/reiji_eva.png"> -->
        <meta name="og:url" content="https://thebelovedmoon.github.io/thebelovedmoon/suzupuyotori">
        <meta name="og:description" content="26 Nov 8pm EST (UTC -5)">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@thebelovedmoon">
        <meta name="theme-color" content="#fed962">
        <meta name="msapplication-navbutton-color" content="#fed962">
        <style>
            
        </style>
        <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
        <script type="text/babel">
            class TextScramble {
                constructor(el) {
                    this.el = el
                    this.chars = '!<>-_\\/[]{}â€”=+*^?#________'
                    this.update = this.update.bind(this)
                }
                setText(newText) {
                    const oldText = this.el.innerText
                    const length = Math.max(oldText.length, newText.length)
                    const promise = new Promise((resolve) => this.resolve = resolve)
                    this.queue = []
                    for (let i = 0; i < length; i++) {
                        const from = oldText[i] || ''
                        const to = newText[i] || ''
                        const start = Math.floor(Math.random() * 75)
                        const end = start + Math.floor(Math.random() * 75)
                        this.queue.push({ from, to, start, end })
                    }
                    cancelAnimationFrame(this.frameRequest)
                    this.frame = 0
                    this.update()
                    return promise
                }
                update() {
                    let output = ''
                    let complete = 0
                    for (let i = 0, n = this.queue.length; i < n; i++) {
                        let { from, to, start, end, char } = this.queue[i]
                        if (this.frame >= end) {
                            complete++
                            output += to
                        } else if (this.frame >= start) {
                            if (!char || Math.random() < 0.25) {
                                char = this.randomChar()
                                this.queue[i].char = char
                            }
                            output += `<span class="glitch">${char}</span>`
                        } else {
                            output += from
                        }
                    }
                    this.el.innerHTML = output
                    if (complete === this.queue.length) {
                        this.resolve()
                    } else {
                        this.frameRequest = requestAnimationFrame(this.update)
                        this.frame++
                    }
                }
                randomChar() {
                    return this.chars[Math.floor(Math.random() * this.chars.length)]
                }
            }
            
            const phrases = [
                'A Pengu Boss has infiltrated the kingdom!',
                '26 Nov 2022',
                '8pm EST (UTC -5)',
                'AuroraLiveVR'
            ]
            
            const el = document.querySelector('.suzuText')
            const fx = new TextScramble(el)
            
            let counter = 0
            const next = () => {
                fx.setText(phrases[counter]).then(() => {
                    setTimeout(next, 1000)
                })
                counter = (counter + 1) % phrases.length
            }

            next()

            //adapted from http://codepen.io/soulwire/pen/mEMPrK
        </script>
        <script src="suzuTimer.js"></script>
    </head>
    <body>
        <div class="trailer">
            <h1 class="suzuText"></h1>
        </div>
        <div class="timer">
            <h1>Debuting in <span id="suzuTimer"></span> (UTC -5)</h1>
        </div>
        <div class="row suzuIntro">
            <div class="column suzuProfile"></div>
            <div class="column suzuDescBG">
                <div class="suzuDesc">
                    <p>
                        Lurking inside the castle for quite some time, Suzu has been known to be the troublemaker.
                        But now, with her newfound responsibilities, will she be able to lead the community?
                        <br><br>
                        Join us as we welcome <b>AuroraLiveVR's Troublemaker aka Pengu of Sweetness</b> in all of
                        her glory in one special debut day!
                    </p>
                </div>
            </div>
        </div>
        <div class="getinvolved">
            <h2>Get Involved</h2>
            <div class="row">
                <div class="column">
                    <a class="twitter-timeline"
                        data-lang="en"
                        data-height="750"
                        data-dnt="true"
                        data-theme="dark"
                        href="https://twitter.com/SuzuVT">Tweets by SuzuVT</a>
                    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                </div>
                <div class="column">
                    <!-- Add a placeholder for the Twitch embed -->
                    <div id="suzuTwitch"></div>

                    <!-- Load the Twitch embed JavaScript file -->
                    <script src="https://embed.twitch.tv/embed/v1.js"></script>

                    <!-- Create a Twitch.Embed object that will render within the "twitch-embed" element -->
                    <script type="text/javascript">
                        new Twitch.Embed("suzuTwitch", {
                            width: 400,
                            height: 750,
                            channel: "SuzuPuyotori",
                            parent: ["thebelovedmoon.github.io/thebelovedmoon"]
                        });
                    </script>
                </div>
            </div>
        </div>
    </body>
</html>